{"_id":"0pFj61UrbQOJRvOf","name":"Roll die","type":"script","author":"4OxU3E57BM9ttwDI","img":"systems/arm5e/assets/MacroDice.png","scope":"global","command":"/**\n * Roll as stress die\n * \n */\n\nconst tokens = canvas.tokens.controlled;\n\nif (tokens.length == 1 ){\n  rollStressDie(tokens[0]);\n} else {\n  printMessage(\"No Tokens were selected\");\n}\n\nasync function rollStressDie(token){\n  let actor = token.actor;\n  \n  let dataset = {\n    roll: \"option\",\n    usefatigue :\"false\"\n  };\n  await actor.sheet._onRoll(dataset);\n  \n}\n\n\t\nfunction printMessage(message){\n  let chatData = {\n    user : game.user._id,\n    content : message,\n    blind: true,\n    whisper : game.users.filter(u => u.isGM).map(u => u.id)\n  };\n  ChatMessage.create(chatData,{});\t\n}","folder":null,"sort":0,"permission":{"default":0,"4OxU3E57BM9ttwDI":3},"flags":{"scene-packer":{"hash":"870ec95973b9cbaddfd315410773744d228b52b7","sourceId":"Macro.DsY5ID5Fmn4JnzZg"},"core":{"sourceId":"Macro.DsY5ID5Fmn4JnzZg"}}}
{"name":"Quick vitals","type":"script","scope":"global","author":"4OxU3E57BM9ttwDI","img":"icons/magic/life/crosses-trio-red.webp","command":"const tokens = canvas.tokens.controlled;\n\nif (tokens.length == 1 ){\n  await quickVitals(tokens[0]);\n} else {\n  ui.notifications.info(\"No Tokens or too many tokens were selected\");\n}\n\nasync function quickVitals(token){\n  if (!token.isOwner) {\n    ui.notifications.info(\"You don't own that token\");\n  }\n  let actor = token.actor;\n  \n  \n  await actor.sheet.quickVitals(token.name);\n  \n}\n\n\t\nfunction printMessage(message){\n  let chatData = {\n    user : game.user._id,\n    content : message,\n    blind: true,\n    whisper : game.users.filter(u => u.isGM).map(u => u.id)\n  };\n  ChatMessage.create(chatData,{});\t\n}","ownership":{"default":0,"4OxU3E57BM9ttwDI":3},"flags":{"core":{"sourceId":"Macro.5rEb7IVg2dJRWd73"}},"_stats":{"systemId":"arm5e","systemVersion":"2.0.5.3","coreVersion":"10.291","createdTime":1680839710991,"modifiedTime":1681022624588,"lastModifiedBy":"4OxU3E57BM9ttwDI"},"folder":null,"sort":0,"_id":"Nf1hBPF2eGL9CdLh"}
{"name":"Migrate icons of actor","type":"script","scope":"global","author":"ErQ613O32LNYb71L","img":"icons/svg/card-joker.svg","command":"const tokens = canvas.tokens.controlled;\n\nif (tokens.length == 1 ){\n  await updateIcons(tokens[0]);\n} else {\n  ui.notifications.info(\"No Tokens or too many tokens were selected\");\n}\n\nasync function updateIcons(token){\n  if (!token.isOwner) {\n    ui.notifications.info(\"You don't own that token\");\n  }\n  let actor = token.actor;\n  \n  \n  const items = actor.items.filter(e => e.type == \"ability\" || e.type == \"virtue\" || e.type == \"flaw\");\n  ui.notifications.info(`${items.length} items found`);\n\n  let updatedItems = []\n  for (let it of items) {\n    if (it.img == CONFIG.ARM5E_DEFAULT_ICONS[it.type] ||\n    it.img === \"icons/svg/mystery-man.svg\" ||\n    it.img === \"icons/svg/item-bag.svg\") {\n        \n      console.log(it.name);\n      let itemData = {_id : it._id, img : CONFIG.Item.systemDataModels[it.type].getIcon(it)};\n      updatedItems.push(itemData);\n    }\n  }\n  let updated = await actor.updateEmbeddedDocuments(\"Item\",updatedItems);\n\n  ui.notifications.info(`${updated.length} items updated`);\n  \n}","ownership":{"default":0,"ErQ613O32LNYb71L":3},"flags":{"core":{"sourceId":"Macro.FL254GFtSFOTzooP"}},"_stats":{"systemId":"arm5e","systemVersion":"2.1.0.11","coreVersion":"10.291","createdTime":1683138726845,"modifiedTime":1687602994235,"lastModifiedBy":"ErQ613O32LNYb71L"},"folder":null,"sort":0,"_id":"Nk5MX0gnXIZWtRVL"}
{"name":"Quick combat","type":"script","scope":"global","author":"4OxU3E57BM9ttwDI","img":"icons/skills/melee/sword-shield-stylized-white.webp","command":"const tokens = canvas.tokens.controlled;\n\nif (tokens.length == 1 ){\n  await quickCombat(tokens[0]);\n} else {\n  ui.notifications.info(\"No Tokens or too many tokens were selected\");\n}\n\nasync function quickCombat(token){\n  if (!token.isOwner) {\n    ui.notifications.info(\"You don't own that token\");\n  }\n  let actor = token.actor;\n  \n  \n  await actor.sheet.quickCombat(token.name);\n  \n}\n\n\t\nfunction printMessage(message){\n  let chatData = {\n    user : game.user._id,\n    content : message,\n    blind: true,\n    whisper : game.users.filter(u => u.isGM).map(u => u.id)\n  };\n  ChatMessage.create(chatData,{});\t\n}","ownership":{"default":0,"4OxU3E57BM9ttwDI":3},"flags":{"core":{"sourceId":"Macro.5rEb7IVg2dJRWd73"}},"_stats":{"systemId":"arm5e","systemVersion":"2.0.5.3","coreVersion":"10.291","createdTime":1680839710991,"modifiedTime":1680976805848,"lastModifiedBy":"4OxU3E57BM9ttwDI"},"folder":null,"sort":0,"_id":"VqOv5gmHAaHPiwPb"}
{"name":"Migrate World Icons","type":"script","scope":"global","author":"ErQ613O32LNYb71L","img":"icons/svg/card-hand.svg","command":"const items = game.items.filter(e => e.type == \"ability\" || e.type == \"virtue\" || e.type == \"flaw\");\nui.notifications.info(`${items.length} items found`);\n\n\n\nlet updatedItems = []\nfor (let it of items) {\n    if (it.img == CONFIG.ARM5E_DEFAULT_ICONS[it.type] ||\n    it.img === \"icons/svg/mystery-man.svg\" ||\n    it.img === \"icons/svg/item-bag.svg\") {\n        \n      console.log(it.name);\n      let itemData = {_id : it._id, img : CONFIG.Item.systemDataModels[it.type].getIcon(it)};\n      updatedItems.push(itemData);\n    }\n}\nlet updated = await Item.updateDocuments(updatedItems);\n\n\n\nui.notifications.info(`${updated.length} items updated`);","ownership":{"default":0,"ErQ613O32LNYb71L":3},"flags":{"core":{"sourceId":"Macro.5yOsEAKylIbEuCl7"}},"_stats":{"systemId":"arm5e","systemVersion":"2.1.0.11","coreVersion":"10.291","createdTime":1685556502442,"modifiedTime":1687603099780,"lastModifiedBy":"ErQ613O32LNYb71L"},"folder":null,"sort":0,"_id":"lRkttBOja3TE9DUU"}
{"name":"Quick magic","type":"script","scope":"global","author":"ErQ613O32LNYb71L","img":"icons/magic/movement/trail-streak-zigzag-teal.webp","command":"const tokens = canvas.tokens.controlled;\n\nif (tokens.length == 1 ){\n  await quickMagic(tokens[0]);\n} else {\n  ui.notifications.info(\"No Tokens or too many tokens were selected\");\n}\n\nasync function quickMagic(token){\n  if (!token.isOwner) {\n    ui.notifications.info(\"You don't own that token\");\n  }\n  let actor = token.actor;\n  \n  \n  await actor.sheet.quickMagic(token.name);\n  \n}\n\n\t\nfunction printMessage(message){\n  let chatData = {\n    user : game.user._id,\n    content : message,\n    blind: true,\n    whisper : game.users.filter(u => u.isGM).map(u => u.id)\n  };\n  ChatMessage.create(chatData,{});\t\n}","ownership":{"default":0,"ErQ613O32LNYb71L":3},"flags":{"core":{"sourceId":"Macro.JD9ajV5NV48yI7fv"}},"_stats":{"systemId":"arm5e","systemVersion":"2.0.5.15","coreVersion":"10.291","createdTime":1681754431515,"modifiedTime":1682954517242,"lastModifiedBy":"ErQ613O32LNYb71L"},"folder":null,"sort":0,"_id":"yfcLKSflUwqsP0Y8"}
